{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46332021-f156325159d295bd8ceb1a335';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchData(inputSearch) {\n    const searchParams = new URLSearchParams({\n        key: API_KEY,\n        q: `${inputSearch}`,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page, \n        per_page: 15\n    });\n   try {\n    const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    throw error;\n  }\n}","export function handleSuccess(images) {\n    const markup = images.map(\n        ({\n            largeImageURL,\n            webformatURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return `<li class=\"gallery-item\">\n            <article class=\"card\">\n                <a class=\"card-link\" href=\"${largeImageURL}\">\n                    <img class=\"card-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n                </a>\n                <div class=\"card-container\">\n                    <div class=\"card-item\">\n                        <p class=\"card-title\">Likes</p>\n                        <p class=\"card-count\">${likes}</p>\n                    </div>\n                    <div class=\"card-item\">\n                        <p class=\"card-title\">Views</p>\n                        <p class=\"card-count\">${views}</p>\n                    </div>\n                    <div class=\"card-item\">\n                        <p class=\"card-title\">Comments</p>\n                        <p class=\"card-count\">${comments}</p>\n                    </div>\n                    <div class=\"card-item\">\n                        <p class=\"card-title\">Downloads</p>\n                        <p class=\"card-count\">${downloads}</p>\n                    </div>\n                </div>\n            </article>\n            </li>`;\n        }\n    ).join('');\n\n    const gallery = document.querySelector('.gallery');\n    \n    gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\n\nexport function showLoader(loaderIndicator) {\n    loaderIndicator.classList.remove('hidden');\n}\n\nexport function hideLoader(loaderIndicator) {\n    loaderIndicator.classList.add('hidden');\n}\n\nexport function smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchData } from './js/pixabay-api.js'; \nimport {\n  handleSuccess,\n  showLoader,\n  hideLoader,\n  clearGallery,\n  smoothScroll\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loaderIndicator = document.getElementById('loader-indicator');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', loadMoreImages);\nasync function handleSubmit(event) {\n    event.preventDefault();\n    query = form.elements.state.value.trim();\n    if (!query) {\n        iziToast.error({ message: 'Enter a search query', position: 'center' });\n        return;\n    }\n\n    clearGallery();\n    page = 1;\n    loadMoreBtn.classList.add('hidden');\n    showLoader(loaderIndicator);\n\n    try {\n        const result = await fetchData(query, page);\n        hideLoader(loaderIndicator);\n        totalHits = result.totalHits;\n\n        if (result.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, no images found. Try again!',\n                position: 'center',\n            });\n            return;\n        }\n\n        handleSuccess(result.hits);\n        lightbox.refresh();\n\n        if (result.hits.length < totalHits) {\n            loadMoreBtn.classList.remove('hidden');\n        }\n    } catch (error) {\n        hideLoader(loaderIndicator);\n        iziToast.error({ message: 'Error! Something went wrong.', position: 'center' });\n    }\n}   \nasync function loadMoreImages() {\n    page += 1;\n    showLoader(loaderIndicator);\n    \n    try {\n    const result = await fetchData(query, page);\n    hideLoader(loaderIndicator);\n\n    handleSuccess(result.hits);\n    lightbox.refresh();\n    smoothScroll();\n        \n    if (page * 15 >= totalHits) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'center',\n      });\n    }\n  } catch (error) {\n    hideLoader(loaderIndicator);\n    iziToast.error({ message: 'Error! Something went wrong.', position: 'center' });\n  }\n}    "],"names":["API_KEY","fetchData","inputSearch","searchParams","axios","error","handleSuccess","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","gallery","showLoader","loaderIndicator","hideLoader","smoothScroll","cardHeight","form","loadMoreBtn","lightbox","SimpleLightbox","query","page","totalHits","handleSubmit","loadMoreImages","event","iziToast","result"],"mappings":"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"}